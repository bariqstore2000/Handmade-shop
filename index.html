<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title id="pageTitle">متجر بريق</title>
  <link id="faviconLink" rel="icon" type="image/png" href="">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Cairo', sans-serif; margin:0; padding:0;
      background: linear-gradient(to bottom right,#fff0f5,#ffe4e1);
      overflow-x:hidden; }
    header {
      display:flex; justify-content: space-between; align-items:center;
      padding:1.5rem; background:linear-gradient(90deg,#e91e63,#f8bbd0);
      color:white; box-shadow:0 4px 12px rgba(0,0,0,0.1);
      border-bottom-left-radius:30px; border-bottom-right-radius:30px;
    }
    header .logo { font-size:1.7rem; font-weight:bold; }
    #socialButtons a {
      margin-left:0.8rem; padding:0.5rem 1rem; border:none;
      color:white; text-decoration:none; border-radius:6px;
      font-weight:600;
    }
    #socialButtons .facebook { background:#1877F2; }
    #socialButtons .instagram { background:#E4405F; }
    #socialButtons .tiktok { background:#000000; }
    .container { max-width:1100px; margin:2rem auto; padding:1rem; }
    .products {
      display:grid; grid-template-columns: repeat(auto-fit,minmax(250px,1fr));
      gap:2rem;
    }
    .product {
      background:#ffffffc9; border-radius:20px;
      padding:1rem; text-align:center;
      box-shadow:0 8px 16px rgba(0,0,0,0.1);
      transition:transform .3s,box-shadow .3s;
      border:2px dashed #f8bbd0;
    }
    .product:hover {
      transform:translateY(-5px); box-shadow:0 12px 24px rgba(0,0,0,0.15);
    }
    .product img {
      width:100%; max-width:280px;
      border-radius:15px; box-shadow:0 0 12px rgba(0,0,0,0.08);
      margin-bottom:1rem;
    }
    .btn {
      display:inline-block; padding:0.6rem 1.2rem;
      background:#e91e63; color:white; text-decoration:none;
      border:none; border-radius:10px; cursor:pointer;
      font-size:1rem; transition:background .3s,transform .2s;
    }
    .btn:hover {
      background:#c2185b; transform:scale(1.05);
    }
    pre, code { display:none!important; }
  </style>
</head>
<body>

  <header>
    <div class="logo" id="siteTitleText">متجر بريق | Bariq Store</div>
    <div id="socialButtons"></div>
  </header>

  <div class="container">
    <div id="products" class="products">جارٍ تحميل المنتجات...</div>
  </div>

  <script>
    const binId = "6859dc408a456b7966b45e97";
    const apiKey = "$2a$10$5mDPhbojylWVObRzAhkf9OHB8AuuykL/cvlGx4rV1IRjwvTzA6a";

    fetch(`https://api.jsonbin.io/v3/b/${binId}/latest`, {
      headers:{ "X-Master-Key":apiKey }
    })
    .then(res=>res.json())
    .then(data=>{
      const rec = data.record;
      const {siteTitle,favicon,social,products} = rec;

      if(siteTitle){
        document.title = siteTitle;
        document.getElementById("siteTitleText").textContent = siteTitle;
      }
      if(favicon){
        document.getElementById("faviconLink").href = favicon;
      }

      const sb = document.getElementById("socialButtons");
      if(social){
        if(social.facebook) sb.innerHTML+=`<a href="${social.facebook}" class="facebook" target="_blank">فيـسبوك</a>`;
        if(social.instagram) sb.innerHTML+=`<a href="${social.instagram}" class="instagram" target="_blank">إنستجرام</a>`;
        if(social.tiktok) sb.innerHTML+=`<a href="${social.tiktok}" class="tiktok" target="_blank">تيك توك</a>`;
      }

      const pc = document.getElementById("products");
      if(!products?.length){
        pc.innerHTML=`<p>لا توجد منتجات حالياً.</p>`;
      } else {
        pc.innerHTML="";
        products.forEach((p,i)=>{
          const card = document.createElement("div"); card.className="product";
          card.innerHTML=`
            <img src="${p.image}" alt="${p.name}">
            <h3>${p.name}</h3>
            <p>السعر: ${p.price} جنيه</p>
            <a href="product.html?id=${i}" class="btn">تفاصيل</a>`;
          pc.appendChild(card);
        });
      }

    })
    .catch(err=>{
      console.error(err);
      document.getElementById("products").innerHTML=`<p style="color:red;">فشل في تحميل المنتجات</p>`;
    });
  </script>

</body>
</html>
