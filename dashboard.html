<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Bariq Store</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family:'Cairo',sans-serif; margin:0;padding:0;background:#fff8f9; }
    header {
      background:linear-gradient(90deg,#e91e63,#f8bbd0);color:white;
      text-align:center;padding:1rem;font-size:1.5rem;
    }
    .container {
      max-width:900px;margin:2rem auto;background:white;
      border-radius:15px;padding:2rem;box-shadow:0 6px 12px rgba(0,0,0,0.1);
    }
    h2{margin-top:0;}
    input{width:100%;padding:0.7rem;margin-bottom:1rem;border:1px solid #ccc;border-radius:10px;}
    textarea{width:100%;padding:0.7rem;margin-bottom:1rem;border:1px solid #ccc;border-radius:10px;}
    button{background:#e91e63;color:white;border:none;
      padding:0.7rem 1.5rem;font-size:1rem;border-radius:10px;cursor:pointer;}
    button:hover{background:#c2185b;}
    .product-item{
      border:1px dashed #f8bbd0;padding:1rem;border-radius:10px;margin-bottom:1rem;
    }
    .product-item input {
      margin: 0.3rem 0;
      padding: 0.5rem;
      font-size: 0.95rem;
    }
    .actions {
      display: flex;
      gap: 10px;
      margin-top: 0.5rem;
    }
  </style>
</head>
<body>
  <header>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Bariq Store</header>
  <div class="container">
    <h2>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹</h2>
    <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹</label><input id="siteTitle" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹">
    <label>Ø±Ø§Ø¨Ø· Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© (favicon)</label><input id="favicon" placeholder="Ø±Ø§Ø¨Ø· PNG ØµØºÙŠØ±">

    <h2>Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªÙˆØ§ØµÙ„</h2>
    <label>ÙÙŠØ³Ø¨ÙˆÙƒ</label><input id="facebook" placeholder="Ø±Ø§Ø¨Ø· ÙÙŠØ³Ø¨ÙˆÙƒ">
    <label>Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…</label><input id="instagram" placeholder="Ø±Ø§Ø¨Ø· Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…">
    <label>ØªÙŠÙƒ ØªÙˆÙƒ</label><input id="tiktok" placeholder="Ø±Ø§Ø¨Ø· ØªÙŠÙƒ ØªÙˆÙƒ">

    <h2>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h2>
    <input id="pname" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
    <input id="pprice" placeholder="Ø§Ù„Ø³Ø¹Ø±">
    <input id="pimage" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø©">

    <button onclick="addProduct()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</button>

    <h2>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h2>
    <div id="productList">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦</div>
  </div>

  <script>
    const binId="6859dc408a456b7966b45e97";
    const apiKey="$2a$10$5mDPhbojylWVObRzAhkf9OHB8AuuykL/cvlGx4rV1IRjwvTzA6a";
    let rec={};

    async function fetchData(){
      const r=await fetch(`https://api.jsonbin.io/v3/b/${binId}/latest`,{headers:{"X-Master-Key":apiKey}});
      rec=(await r.json()).record||{};
      fillForm(); renderProducts();
    }

    function fillForm(){
      document.getElementById("siteTitle").value=rec.siteTitle||"";
      document.getElementById("favicon").value=rec.favicon||"";
      document.getElementById("facebook").value=rec.social?.facebook||"";
      document.getElementById("instagram").value=rec.social?.instagram||"";
      document.getElementById("tiktok").value=rec.social?.tiktok||"";
    }

    function renderProducts(){
      const dl=document.getElementById("productList");
      dl.innerHTML="";
      (rec.products||[]).forEach((p,i)=>{
        const d=document.createElement("div"); d.className="product-item";
        d.innerHTML=`
          <input value="${p.name}" id="name${i}" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
          <input value="${p.price}" id="price${i}" placeholder="Ø§Ù„Ø³Ø¹Ø±">
          <input value="${p.image}" id="image${i}" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
          <div class="actions">
            <button onclick="updateProduct(${i})">ğŸ’¾ Ø­ÙØ¸</button>
            <button onclick="deleteProduct(${i})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
          </div>
        `;
        dl.appendChild(d);
      });
    }

    async function save(){
      await fetch(`https://api.jsonbin.io/v3/b/${binId}`,{
        method:"PUT",
        headers:{"Content-Type":"application/json","X-Master-Key":apiKey},
        body:JSON.stringify(rec)
      });
      fetchData();
    }

    function addProduct(){
      const n=document.getElementById("pname").value;
      const pr=document.getElementById("pprice").value;
      const im=document.getElementById("pimage").value;
      if(!n||!pr||!im)return alert("Ø§Ù…Ù„Ø£ ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„");
      rec.products=rec.products||[];
      rec.products.push({name:n,price:pr,image:im});
      document.getElementById("pname").value="";
      document.getElementById("pprice").value="";
      document.getElementById("pimage").value="";
      save();
    }

    function deleteProduct(i){
      rec.products.splice(i,1); save();
    }

    function updateProduct(i){
      const n = document.getElementById("name"+i).value;
      const p = document.getElementById("price"+i).value;
      const im = document.getElementById("image"+i).value;
      if(!n||!p||!im) return alert("Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ±Ùƒ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙØ§Ø±ØºØ©");
      rec.products[i] = {name:n, price:p, image:im};
      save();
    }

    document.getElementById("siteTitle").addEventListener("change",e=>{rec.siteTitle=e.target.value;save();});
    document.getElementById("favicon").addEventListener("change",e=>{rec.favicon=e.target.value;save();});
    document.getElementById("facebook").addEventListener("change",e=>{rec.social=rec.social||{};rec.social.facebook=e.target.value;save();});
    document.getElementById("instagram").addEventListener("change",e=>{rec.social=rec.social||{};rec.social.instagram=e.target.value;save();});
    document.getElementById("tiktok").addEventListener("change",e=>{rec.social=rec.social||{};rec.social.tiktok=e.target.value;save();});

    fetchData();
  </script>
</body>
</html>
